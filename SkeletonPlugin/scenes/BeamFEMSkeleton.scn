<?xml version="1.0"?>
<Node name="root" gravity="0 0 0" dt="1"  >

	<VisualStyle displayFlags="showVisualModels showWireframe showBehaviorModels hideCollisionModels hideMappings hideForceFields" />
	<RequiredPlugin pluginName="SkeletonPlugin"/>
	<RequiredPlugin pluginName='SofaOpenglVisual'/>
	<ViewerSetting resolution="1200 1200" />

	<Node name="Vessels" activated="1">
		<MeshObjLoader name='myLoader' filename='data/mesh/vesselSegment.obj'/>  
		<OglModel name="visualModel" src='@myLoader' color="1 0.6 0.6 1"/>
		<MeshSkeletonization template="Vec3d" name="skel" inputVertices="@myLoader.position" inputTriangles="@myLoader.triangles" />
	</Node>	

	<!-- NOTE: 
	The position and lines should be passed directly from MeshSkeletonization to BeamFEMForceField.	
	I will implement a quick Engine to do that.
	In the mean time use generated files and copy/paste them.
	You may have to order the points and edges before feeding them to BeamFEMForceField.
	 -->
	<Node name="Beams" activated="1">    		
	        <MechanicalObject template="Rigid3d" name="BeamDOFs" position="0.00671732 0.00198818 0.200274 0 0 0 1 0.00525121 0.00274144 0.200697 0 0 0 1 0.0144205 0.000200659 0.196766 0 0 0 1 0.00381526 0.00325765 0.201011 0 0 0 1 -0.000413926 0.00384828 0.201621 0 0 0 1 -0.00269336 0.00367566 0.201811 0 0 0 1 -0.0162832 0.0218957 0.194973 0 0 0 1 -0.0157561 0.0209032 0.195621 0 0 0 1 -0.0148986 0.0193463 0.196598 0 0 0 1 -0.013763 0.01737 0.197801 0 0 0 1 -0.0118151 0.0142045 0.199543 0 0 0 1 -0.0127952 -0.00277541 0.202707 0 0 0 1 -0.0179481 -0.00390045 0.201449 0 0 0 1 -0.0100881 -0.000453375 0.20268 0 0 0 1 -0.0191585 -0.00378408 0.201018 0 0 0 1 -0.0198925 -0.00365268 0.200709 0 0 0 1 -0.00592703 0.00263035 0.20215 0 0 0 1 -0.00484675 0.00326465 0.201986 0 0 0 1 -0.0110013 0.0129638 0.200084 0 0 0 1 -0.00679096 0.00660121 0.201484 0 0 0 1 -0.00584271 0.00502494 0.201721 0 0 0 1 0.00970073 0.000678009 0.199255 0 0 0 1 0.0084043 0.00112596 0.199779 0 0 0 1 0.011668 0.000427765 0.198275 0 0 0 1 0.00241641 0.00359541 0.201263 0 0 0 1 -0.00201755 0.00384477 0.201749 0 0 0 1 -0.0143672 -0.00409901 0.202465 0 0 0 1 -0.0114475 -0.00163015 0.202736 0 0 0 1 -0.018478 -0.00390527 0.201304 0 0 0 1 -0.00707019 0.00210355 0.202297 0 0 0 1 -0.00991798 0.011348 0.200619 0 0 0 1 0.0129828 0.000301091 0.197578 0 0 0 1 0.0138834 0.000232424 0.197076 0 0 0 1 0.00247815 0.00358254 0.201252 0 0 0 1 0.00104453 0.00377688 0.20146 0 0 0 1 -0.0148784 0.0193105 0.19662 0 0 0 1 -0.012762 0.0157058 0.198763 0 0 0 1 -0.0114838 -0.00166135 0.202737 0 0 0 1 -0.00850305 0.000904422 0.202519 0 0 0 1 -0.020055 -0.00362431 0.200637 0 0 0 1 -0.00790542 0.00833984 0.20123 0 0 0 1 0.0139482 0.000228183 0.197039 0 0 0 1 0.00394671 0.00321437 0.200984 0 0 0 1 -0.00846776 0.000934929 0.202514 0 0 0 1 -0.00784623 0.00824833 0.201244 0 0 0 1 -0.00194938 0.00384693 0.201744 0 0 0 1 -0.0117845 0.0141575 0.199564 0 0 0 1 -0.0159144 -0.00385712 0.202004 0 0 0 1 -0.014472 -0.00557562 0.202643 0 0 0 1 -0.0176483 -0.00389706 0.201531 0 0 0 1 -0.00895798 0.00991337 0.200912 0 0 0 1 0.00925139 0.000830593 0.199438 0 0 0 1 -0.0173011 -0.00389325 0.201627 0 0 0 1 " />
	        <MeshTopology name="lines" points="@BeamDOFs.position" lines="51 22 22 0 0 1 51 21 42 3 1 42 21 23 3 33 23 31 41 32 41 2 33 24 24 34 34 4 4 45 45 25 25 5 5 17 6 7 7 8 8 35 35 9 9 36 36 10 46 10 26 47 26 48 26 11 52 49 47 52 49 12 37 27 11 37 28 12 28 14 15 14 43 38 13 38 43 29 16 17 18 30 30 50 44 19 44 40 19 20 20 17 31 32 18 46 13 27 29 16 15 39 50 40 "/>
		<SphereCollisionModel radius="0.0000"/>
		<UniformMass  totalMass="0.1" showAxisSizeFactor="0.001"/>
	        <BeamFEMForceField name="BeamFEM" radius="0.005" youngModulus="5000" poissonRatio="0.49"/>
        </Node>	


 
</Node>

